{% extends "account/auth_card.html" %}
{% load widget_tweaks %}
{% load socialaccount %}

{% block auth_title %}Create an account{% endblock %}

{% block auth_body %}
<form method="post" action="{% url 'account_signup' %}" novalidate>
  {% csrf_token %}

  {{ form.non_field_errors }}

  <!-- Email -->
  <div class="mb-3">
    <label for="{{ form.email.id_for_label }}" class="form-label">
      Email address
    </label>
    {{ form.email|add_class:"form-control"|attr:"autocomplete:email" }}
    {{ form.email.errors }}
  </div>

  <!-- First / Last name -->
  <div class="row">
    <div class="col-md-6 mb-3">
      <label for="{{ form.first_name.id_for_label }}" class="form-label">
        First name
      </label>
      {{ form.first_name|add_class:"form-control" }}
      {{ form.first_name.errors }}
    </div>

    <div class="col-md-6 mb-3">
      <label for="{{ form.last_name.id_for_label }}" class="form-label">
        Last name
      </label>
      {{ form.last_name|add_class:"form-control" }}
      {{ form.last_name.errors }}
    </div>
  </div>

  <!-- Phone (optional, only if present in form) -->
  {% if form.phone %}
  <div class="mb-3">
    <label for="{{ form.phone.id_for_label }}" class="form-label">
      Phone (optional)
    </label>
    {{ form.phone|add_class:"form-control"|attr:"autocomplete:tel" }}
    {{ form.phone.errors }}
  </div>
  {% endif %}

  <!-- Password -->
  <div class="mb-3">
    <label for="{{ form.password1.id_for_label }}" class="form-label">
      Password
    </label>
    {{ form.password1|add_class:"form-control"|attr:"autocomplete:new-password" }}
    {{ form.password1.errors }}
    <div class="form-text">
      Minimum 8 characters recommended.
    </div>
  </div>

  <!-- Password confirm -->
  <div class="mb-3">
    <label for="{{ form.password2.id_for_label }}" class="form-label">
      Confirm password
    </label>
    {{ form.password2|add_class:"form-control"|attr:"autocomplete:new-password" }}
    {{ form.password2.errors }}
  </div>

  <!-- Terms -->
  <div class="form-check mb-3">
    <input
      class="form-check-input"
      type="checkbox"
      id="agree"
      name="agree"
      required
    >
    <label class="form-check-label small" for="agree">
      I agree to the
      <a href="{% url 'terms' %}" target="_blank" rel="noopener">
        Terms & Privacy
      </a>
    </label>
  </div>

  <button type="submit" class="btn btn-primary w-100 py-2">
    Create account
  </button>
</form>

{% if socialaccount_providers %}
  {% if socialaccount_providers.google %}
    <div class="mt-3">
      <p class="text-center small text-muted mb-2">
        Or sign up with
      </p>
      <a
        href="{% provider_login_url 'google' %}"
        class="btn btn-outline-dark w-100"
      >
        Continue with Google
      </a>
    </div>
  {% endif %}
{% endif %}
{% endblock %}

{% block auth_footer %}
<p class="small mb-0">
  Already have an account?
  <a href="{% url 'account_login' %}">Sign in</a>
</p>
{% endblock %}
